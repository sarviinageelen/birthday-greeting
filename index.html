<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday!</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Swapped to more elegant, classic fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600&family=Lato:wght@300;400&display=swap" rel="stylesheet">
    <style>
        /* ------------------- */
        /* --- CSS Variables & Setup (Vibrant Pink Theme) --- */
        /* ------------------- */
        :root {
            --font-greeting: 'Cormorant Garamond', serif;
            --font-sans: 'Lato', sans-serif;

            /* New palette based on user request #f0a3ab */
            --color-bg-start: #f2b4bb;   /* A slightly lighter tint for the gradient */
            --color-bg-end: #f0a3ab;     /* The requested vibrant pink */
            --color-text: #ffffff;       /* Crisp white for high contrast and a clean look */
            --color-text-light: rgba(255, 255, 255, 0.8); /* Softer white for secondary text */
            --color-particle: rgba(255, 255, 255, 0.5);
            --color-progress-indicator: rgba(255, 255, 255, 0.35);
            --color-progress-active: #ffffff;
            --color-focus-ring: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-sans);
            background: linear-gradient(135deg, var(--color-bg-start), var(--color-bg-end));
            color: var(--color-text);
            overflow: hidden; /* Hide scrollbars as they are no longer needed */
            min-height: 100vh;
            /* Center the main content vertically and horizontally */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* ------------------- */
        /* --- Background Canvas --- */
        /* ------------------- */
        #particles-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        /* ------------------- */
        /* --- Main Content Layout --- */
        /* ------------------- */
        .content-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
            padding: 20px;
        }

        /* ------------------- */
        /* --- Greeting Text & Animation (Refined) --- */
        /* ------------------- */
        .greeting-container {
            display: flex;
            flex-direction: column;
            gap: 1em;
            align-items: center;
        }

        .greeting-static {
            font-family: var(--font-sans);
            font-weight: 300;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            font-size: clamp(0.8rem, 3vw, 1rem);
            color: var(--color-text-light);
            opacity: 0;
            animation: fadeIn 1.5s 0.5s forwards;
        }

        .greeting-name {
            font-family: var(--font-greeting);
            font-weight: 600;
            letter-spacing: 0.02em;
            font-size: clamp(2.5rem, 10vw, 6rem);
            white-space: nowrap;
            min-height: 1.2em;
            line-height: 1;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .char {
            display: inline-block;
            opacity: 0;
            animation-fill-mode: forwards;
            will-change: transform, opacity;
        }

        .char.animate-in { animation-name: reveal-in; }
        .char.animate-out { animation-name: reveal-out; }

        @keyframes reveal-in {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes reveal-out {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-20px); }
        }

        /* ------------------- */
        /* --- UI Controls (Minimalist) --- */
        /* ------------------- */
        .controls-container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 20;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 24px;
        }

        .nav-controls {
            display: flex;
            gap: 30px;
        }

        .nav-button {
            background: transparent;
            border: none;
            color: var(--color-text-light);
            font-family: var(--font-sans);
            font-size: 0.9rem;
            padding: 8px;
            cursor: pointer;
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }

        .nav-button:hover {
            opacity: 1;
        }

        .nav-button:focus-visible {
            outline: 2px solid var(--color-focus-ring);
            outline-offset: 2px;
            border-radius: 4px;
        }
        
        #progress-indicator {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        
        .progress-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: var(--color-progress-indicator);
            transition: background-color 0.4s ease, transform 0.4s ease;
        }

        .progress-dot.active {
            background-color: var(--color-progress-active);
            transform: scale(1.2);
        }

        /* ------------------- */
        /* --- Accessibility: Reduced Motion --- */
        /* ------------------- */
        @media (prefers-reduced-motion: reduce) {
            .char, .greeting-static {
                animation: none !important;
                transition: none !important;
            }
            .greeting-static, .char {
                opacity: 1;
            }
        }

        /* ------------------- */
        /* --- Responsive Adjustments --- */
        /* ------------------- */
        @media (max-width: 768px) {
            .content-wrapper { padding: 10px; }
            .controls-container { bottom: 15px; gap: 20px; }
        }
    </style>
</head>
<body>
    <canvas id="particles-canvas" aria-hidden="true"></canvas>

    <main class="content-wrapper">
        <div class="greeting-container">
            <h1 class="greeting-static">Happy Birthday</h1>
            <div class="greeting-name" id="name-text" aria-live="polite" aria-atomic="true"></div>
        </div>
    </main>

    <div class="controls-container">
        <nav class="nav-controls" aria-label="Name switcher">
            <button id="prev-name" class="nav-button">PREV</button>
            <button id="next-name" class="nav-button">NEXT</button>
        </nav>

        <div id="progress-indicator" aria-label="Progress through names"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- 1. CONFIGURATION (Auto-play) ---
            const config = {
                names: ['Jolyn', 'Polyn', 'Polynski', 'Jojo Pan Meow', 'Joly-bee', 'Nyloj', 'Chang Chang Jojo', 'Bojobo'],
                particles: { 
                    count: 25,
                    minSize: 1, 
                    maxSize: 3,
                    speed: 0.2
                },
                animation: { 
                    duration: 800, 
                    stagger: 50,
                    autoChangeInterval: 4000 // Time in ms before changing to the next name
                }
            };

            // --- 2. DOM ELEMENT REFERENCES ---
            const nameEl = document.getElementById('name-text');
            const prevButton = document.getElementById('prev-name');
            const nextButton = document.getElementById('next-name');
            const progressIndicator = document.getElementById('progress-indicator');
            const canvas = document.getElementById('particles-canvas');
            const ctx = canvas.getContext('2d');

            // --- 3. STATE VARIABLES ---
            let particles = [];
            let animationFrameId;
            let autoChangeTimer;
            let currentNameIndex = -1;
            let latestRequestedIndex = 0;
            let isAnimating = false;

            // --- 4. CANVAS & PARTICLE LOGIC ---
            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }

            class Particle {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                    this.size = Math.random() * (config.particles.maxSize - config.particles.minSize) + config.particles.minSize;
                    this.speedX = (Math.random() * 2 - 1) * config.particles.speed;
                    this.speedY = (Math.random() * 2 - 1) * config.particles.speed;
                }
                update() {
                    this.x += this.speedX;
                    this.y += this.speedY;
                    if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
                    if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
                }
                draw() {
                    ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--color-particle').trim();
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                }
            }

            function createParticles() {
                particles = [];
                for (let i = 0; i < config.particles.count; i++) {
                    particles.push(new Particle());
                }
            }

            function animateParticles() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach(p => { p.update(); p.draw(); });
                animationFrameId = requestAnimationFrame(animateParticles);
            }

            // --- 5. UI UPDATE & ANIMATION LOGIC ---
            function updateProgressIndicator() {
                progressIndicator.innerHTML = '';
                config.names.forEach((_, i) => {
                    const dot = document.createElement('div');
                    dot.classList.add('progress-dot');
                    if (i === currentNameIndex) dot.classList.add('active');
                    progressIndicator.appendChild(dot);
                });
            }

            function animateText(element, text, direction) {
                return new Promise((resolve) => {
                    element.innerHTML = '';
                    const chars = text.split('');
                    if (chars.length === 0) return resolve();
                    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
                    if (prefersReducedMotion) {
                        element.textContent = text;
                        return resolve();
                    }
                    const animationClass = direction === 'in' ? 'animate-in' : 'animate-out';
                    chars.forEach((char, index) => {
                        const span = document.createElement('span');
                        span.className = 'char';
                        span.textContent = char === ' ' ? '\u00A0' : char;
                        span.style.animationDuration = `${config.animation.duration}ms`;
                        span.style.animationDelay = `${index * config.animation.stagger}ms`;
                        span.classList.add(animationClass);
                        element.appendChild(span);
                    });
                    const totalDuration = config.animation.duration + (chars.length - 1) * config.animation.stagger;
                    setTimeout(resolve, totalDuration);
                });
            }

            // --- 6. CORE SEQUENCING LOGIC ---
            async function changeName() {
                if (isAnimating) return;
                isAnimating = true;

                while (currentNameIndex !== latestRequestedIndex) {
                    const indexToAnimateTo = latestRequestedIndex;
                    const oldName = config.names[currentNameIndex];

                    if (currentNameIndex !== -1) {
                        await animateText(nameEl, oldName, 'out');
                    }

                    if (indexToAnimateTo !== latestRequestedIndex) {
                        continue;
                    }

                    const newName = config.names[indexToAnimateTo];
                    currentNameIndex = indexToAnimateTo;
                    updateProgressIndicator();
                    await animateText(nameEl, newName, 'in');
                }
                isAnimating = false;
            }

            // --- 7. EVENT HANDLERS & AUTO-PLAY ---
            function startAutoChange() {
                if (autoChangeTimer) clearInterval(autoChangeTimer);
                
                const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
                if (prefersReducedMotion) return; // Don't auto-play if motion is reduced

                autoChangeTimer = setInterval(() => {
                    let newIndex = latestRequestedIndex + 1;
                    if (newIndex >= config.names.length) {
                        newIndex = 0;
                    }
                    latestRequestedIndex = newIndex;
                    changeName();
                }, config.animation.autoChangeInterval);
            }

            function handleNavClick(direction) {
                let newIndex = currentNameIndex + direction;
                if (newIndex < 0) newIndex = config.names.length - 1;
                if (newIndex >= config.names.length) newIndex = 0;
                
                if (newIndex !== latestRequestedIndex) {
                    latestRequestedIndex = newIndex;
                    changeName();
                    // Reset the timer when user interacts manually
                    startAutoChange();
                }
            }

            // --- 8. INITIALIZATION ---
            function init() {
                resizeCanvas();
                createParticles();
                
                const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
                if (!prefersReducedMotion) {
                    animationFrameId = requestAnimationFrame(animateParticles);
                }

                latestRequestedIndex = 0;
                currentNameIndex = -1;
                changeName();
                startAutoChange(); // Start the automatic slideshow
                
                prevButton.addEventListener('click', () => handleNavClick(-1));
                nextButton.addEventListener('click', () => handleNavClick(1));
                window.addEventListener('resize', () => { resizeCanvas(); createParticles(); });
                window.addEventListener('unload', () => { 
                    if (animationFrameId) cancelAnimationFrame(animationFrameId);
                    if (autoChangeTimer) clearInterval(autoChangeTimer);
                });
            }

            init();
        });
    </script>
</body>
</html>
